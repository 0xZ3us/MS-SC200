# Introduction to Microsoft Defender for Endpoint

Microsoft Defender for Endpoint is a platform designed to help enterprise networks prevent, detect, investigate, and respond to advanced threats on their endpoints.

![Microsoft Defender for Endpoint configuration.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/defender-configuration.png)

The following capabilities are enabled with Microsoft Defender for Endpoint:

-   Threat and vulnerability management provides real-time visibility and helps identify ways to improve your security posture.
-   Attack surface reduction eliminates risky or unnecessary surface areas and restricts dangerous code from running.
-   Advanced protection uses machine learning and deep analysis to protect against file-based malware.
-   Endpoint detection and response monitors behaviors and attacker techniques to detect and respond to advanced attacks.
-   Leverage artificial intelligence to automatically investigate alerts and remediate complex threats in minutes.
-   Microsoft threat experts bring deep knowledge and proactive threat hunting to your security operations Center.

Microsoft Defender for Endpoint uses the following combination of technologies built into Windows 10 and Microsoft's robust cloud service:

-   **Endpoint behavioral sensors**. Embedded in Windows 10, these sensors collect and process behavioral signals from the operating system. The sensors send the data to your private, isolated cloud instance of Microsoft Defender for Endpoint.
-   **Cloud security analytics**. Using big data, machine learning, and unique Microsoft optics across the Windows ecosystem, enterprise cloud products (such as Office 365), and online assets, behavioral signals are translated into insights, detections, and recommended responses to advanced threats.
-   **Threat intelligence**. Generated by Microsoft hunters and security teams, and augmented by threat intelligence provided by partners, threat intelligence enables Microsoft Defender for Endpoint to identify attacker tools, techniques, and procedures, and generate alerts when these are observed in collected sensor data.

# Practice security administration

## Threat and vulnerability management

[![Threat and Vulnerability Management dashboard.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/threat-vulnerability-management-dashboard.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/threat-vulnerability-management-dashboard.png#lightbox)

Effectively identifying, assessing, and remediating endpoint weaknesses is pivotal to running a healthy security program and reducing organizational risk. Threat and vulnerability management serves as an infrastructure for reducing organizational exposure, hardening endpoint surface area, and increasing organizational resilience.

This infrastructure helps organizations discover vulnerabilities and misconfigurations in real time, based on sensors, without the need of agents or periodic scans. It prioritizes issues based on a number of factors. Those factors include the threat landscape, detections in your organization, sensitive information on vulnerable devices, and business context.

Threat and vulnerability management is built-in, real-time, cloud-powered, fully integrated with the Microsoft endpoint security stack, the Microsoft Intelligent Security Graph, and the application analytics knowledge base. It can create a security task or ticket through integration with Microsoft Intune and Microsoft Endpoint Manager.

It provides the following solutions to gaps across security operations, security administration, and IT administration:

-   Real-time endpoint detection and response (EDR) insights correlated with endpoint vulnerabilities
-   Linked machine vulnerability and security configuration assessment data in the context of exposure discovery
-   Built-in remediation processes through Microsoft Intune and Microsoft Endpoint Manager

For example, using the security recommendations present in the portal, an administrator could request an application update, which would then notify the Intune team to remediate the request.

[![Security recommendations.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/security-recommendations.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/security-recommendations.png#lightbox)

## Attack surface reduction

The attack surface reduction set of capabilities provides the first line of defense in the stack by ensuring configuration settings are properly set and exploit mitigation techniques are applied.

-   **Hardware-based isolation** protects and maintains the integrity of the system as it starts and while it's running, and validates system integrity through local and remote attestation. Container isolation for Microsoft Edge helps protect the host operating system from malicious websites.
-   **Application control** moves away from the traditional application trust model where all applications are assumed trustworthy by default to one where applications must earn trust in order to run.
-   **Exploit protection** applies mitigation techniques to apps your organization uses, both individually and organization-wide.
-   **Network protection** extends the malware and social engineering protection offered by Microsoft Defender SmartScreen in Microsoft Edge to cover network traffic and connectivity on your organization's devices.
-   **Controlled folder access** helps protect files in key system folders from changes made by malicious and suspicious apps, including file-encrypting ransomware malware.
-   **Attack surface reduction** reduces the attack surface of your applications with intelligent rules that stop the vectors used by Office-, script-, and mail-based malware.
-   **Network firewall** uses host-based, two-way network traffic filtering that blocks unauthorized network traffic flowing into or out of the local device.

The below screenshot shows a chart of detections against an attack surface reduction rule that is protecting office applications:

[![Attack surface reduction rules.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/attack-surface-reduction-rules.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/attack-surface-reduction-rules.png#lightbox)

## Next generation protection

Microsoft Defender Antivirus is a built-in antimalware solution that provides next generation protection for desktops, portable computers, and servers. Microsoft Defender Antivirus includes:

-   Cloud-delivered protection for near-instant detection and blocking of new and emerging threats. Along with machine learning and the Intelligent Security Graph, cloud-delivered protection is part of the next-gen technologies that power Microsoft Defender Antivirus.
-   Always-on scanning, using advanced file and process behavior monitoring and other heuristics (also known as "real-time protection").
-   Dedicated protection updates based on machine-learning, human and automated big-data analysis, and in-depth threat resistance research.

The following proxy and network settings should be considered:

-   The Microsoft Defender for Endpoint sensor requires Microsoft Windows HTTP (WinHTTP) to report sensor data and communicate with the Microsoft Defender for Endpoint service.
-   The embedded Microsoft Defender for Endpoint sensor runs in system context using the LocalSystem account. The sensor uses Microsoft Windows HTTP Services (WinHTTP) to enable communication with the Microsoft Defender for Endpoint cloud service.
-   The WinHTTP configuration setting is independent of the Windows Internet (WinINet) internet browsing proxy settings and can only discover a proxy server by using the following auto discovery methods:
    -   Transparent proxy
    -   Web Proxy Autodiscovery Protocol (WPAD)

## Endpoint detection and response

Microsoft Defender for Endpoint endpoint detection and response capabilities provide advanced attack detections that are near real-time and actionable. Security analysts can prioritize alerts effectively, gain visibility into the full scope of a breach, and take response actions to remediate threats.

When a threat is detected, alerts are created in the system for an analyst to investigate. Alerts with the same attack techniques or attributed to the same attacker are aggregated into an entity called an **incident**. Aggregating alerts in this manner makes it easy for analysts to collectively investigate and respond to threats.

Inspired by the "assume breach" mindset, Microsoft Defender for Endpoint continuously collects behavioral cyber telemetry. This includes process information, network activities, deep optics into the kernel and memory manager, user login activities, registry and file system changes, and others. The information is stored for six months, enabling an analyst to travel back in time to the start of an attack. The analyst can then pivot using various views and approach an investigation through multiple vectors.

The Security operations dashboard (below) is where the endpoint detection and response capabilities are surfaced. It provides a high-level overview of where detections were seen and highlights where response actions are needed.

[![Security operations dashboard.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/security-operations-dashboard.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/security-operations-dashboard.png#lightbox)

## Automated investigation and remediation

Microsoft Defender for Endpoint offers a wide breadth of visibility on multiple machines. With this kind of optics, the service generates a multitude of alerts. The volume of alerts generated can be challenging for a typical security operations team to individually address. To address this challenge, Microsoft Defender for Endpoint uses automated investigation and remediation capabilities to significantly reduce the volume of alerts that must be investigated individually.

[![Automated investigations.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/automated-investigations.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/automated-investigations.png#lightbox)

The automated investigation feature uses various inspection algorithms, and processes used by analysts (such as playbooks) to examine alerts and take immediate remediation action to resolve breaches. This significantly reduces alert volume, allowing security operations experts to focus on more sophisticated threats and other high value initiatives. In the following investigation screenshot, we can see that malware was detected, and automatically remediated:

[![Malware detected and remediated.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/malware-detected-remediated.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/malware-detected-remediated.png#lightbox)

### Explore how to reduce organizational risk with Threat and Vulnerability Management

View a [video version](https://www.microsoft.com/videoplayer/embed/RE4AFt9) of the interactive guide (captions available in more languages).

[![Reduce organizational risk with Threat and Vulnerability Management.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/reduce-organizational-risk.png)](https://mslearn.cloudguides.com/guides/Reduce%20organizational%20risk%20with%20Threat%20and%20Vulnerability%20Management)

Be sure to click the full-screen option in the video player. When you're done, use the **Back** arrow in your browser to come back to this page.

# Hunt threats within your network

Advanced hunting within Microsoft Defender for Endpoint allows you to hunt for possible threats across your organization using a powerful search and query tool. You can proactively inspect events in your network in order to locate interesting indicators and entities. The flexible access to data aids unconstrained hunting for both known and potential threats.

### Explore how to investigate and remediate threats with Microsoft Defender for Endpoint

You can use threat-hunting queries to build custom detection rules. These rules run automatically to check for and respond to various events and system states, including suspected breach activity and misconfigured machines.

To perform a sample threat-hunting query, in the [Microsoft 365 Defender portal](https://security.microsoft.com/), select **Hunting** and then select **Advanced Hunting**. In the query field, type the following example and select Run query:

[![Use threat hunting queries.](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/threat-hunting-query.png)](https://learn.microsoft.com/en-us/training/wwl/m365-security-threat-protect/media/threat-hunting-query.png#lightbox)

In the code above, the following filters have been applied:

-   The first `where` returns records from the previous seven days only
-   The second `where` filters on `FileName` to search for process file names representing the PowerShell application
-   The third `where` filters on strings in command lines that are typically used to download files using PowerShell
-   `project` returns the specified columns only
-   `top` limits the number of results to 100

Advanced hunting is based on the Kusto query language. The following operators are allowed:

-   `where`. Filter a table to the subset of rows that satisfy a predicate.
-   `summarize`. Produce a table that aggregates the content of the input table.
-   `join` Merge the rows of two tables to form a new table by matching values of the specified column(s) from each table.
-   `count`. Return the number of records in the input record set.
-   `top`. Return the first N records sorted by the specified columns.
-   `limit`. Return up to the specified number of rows.
-   `project`. Select the columns to include, rename or drop, and insert new computed columns.
-   `extend`. Create calculated columns and append them to the result set.
-   `makeset()`. Return a dynamic (JSON) array of the set of distinct values that Expr takes in the group.
-   `find`. Find rows that match a predicate across a set of tables.

### Best practices

The following best practices can be followed to ensure query performance:

-   Apply filters first - Azure Kusto is highly optimized to utilize time filters.
-   Use the **has** keyword over **contains** when looking for full tokens.
-   Use **looking in specific column** rather than using full text search across all columns.
-   When joining between two tables, choose the table with fewer rows to be the first one (left-most).
-   When joining between two tables, project only needed columns from both sides of the join.

# Summary and knowledge check

In this module, you learned how Microsoft Defender for Endpoint can help your organization stay secure.

Now that you have completed this module, you should be able to:

-   Define the capabilities of Microsoft Defender for Endpoint.
-   Understand how to hunt threats within your network.
-   Explain how Microsoft Defender for Endpoint can remediate risks in your environment.

## Check your knowledge

1. What is required to deploy Microsoft Defender for Endpoint to Windows devices in your organization?

[X] Subscription to the Microsoft Defender for Endpoint online service.

Correct! To deploy Microsoft Defender for Endpoint you require a subscription to the Microsoft Defender for Endpoint online service.

No action is required. Microsoft Defender for Endpoint is included in the Windows 10 operating system.

License for Microsoft Intune.

2. Which of the following choices describes threat hunting using Microsoft Defender for Endpoint?

[X] You can proactively inspect events in your network using a powerful search and query tool.

Correct! Microsoft Defender for Endpoint advanced threat hunting is a powerful search and query tool built on top of a query language that gives you flexibility.

Detecting and blocking apps that are considered unsafe but may not be detected as malware.

Reduce vulnerabilities (attack surfaces) in your applications with intelligent rules that help stop malware.

3. Which of the following is not a component of Microsoft Defender for Endpoint?

Next generation protection

Endpoint detection and response

[X] Cloud device management

Correct! Cloud device management is not a component of security administration of Microsoft Defender for Endpoint.